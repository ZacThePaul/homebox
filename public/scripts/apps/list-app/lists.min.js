function getLists(){fetch("/apps/lists/get_all").then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{for(let t=0;t<e.list.length;t++){const s=e.list[t]["@attributes"].user_id;if(console.log(typeof s+typeof document.getElementById("session-user-id").value),s!=document.getElementById("session-user-id").value)continue;const n=e.list[t].name;let l=e.list[t].items.item;Array.isArray(l)||(l=[l]);let i="";for(let e of l)i+=`<li class="self-list-item">${e}</li>`;const o=`\n                <div class="self-list-item">\n                    <h5 class="self-list-item-title">${n}</h5>\n                    <ul class="self-list">\n                        ${i}\n                    </ul>\n                </div>\n                `;document.getElementById("self-lists-container").innerHTML+=o}for(let t=0;t<e.list.length;t++){if(1!=parseInt(e.list[t]["@attributes"].community))continue;e.list[t]["@attributes"].user_id;const s=e.list[t].name;let n=e.list[t].items.item;Array.isArray(n)||(n=[n]);let l="";for(let e of n)l+=`<li class="self-list-item">${e}</li>`;const i=`\n                <div class="self-list-item">\n                    <h5 class="self-list-item-title">${s}</h5>\n                    <ul class="self-list">\n                        ${l}\n                    </ul>\n                </div>\n                `;document.getElementById("community-lists-container").innerHTML+=i}})).catch((e=>{console.error("Fetch error:",e)}))}function addNewList(){document.getElementById("add-new-list-button").addEventListener("click",(function(e){e.preventDefault();const t=document.getElementsByClassName("list-index-container")[0],s=document.getElementsByClassName("list-add-new-container")[0],n=document.getElementsByClassName("list-edit-container")[0];t.classList.remove("show"),n.classList.remove("show"),s.classList.add("show"),t.classList.add("hide"),n.classList.add("hide"),s.classList.remove("hide")}))}window.addEventListener("load",(function(){getLists(),addNewList();let e=[];const t=document.getElementById("add-list-item"),s=document.getElementById("list-item-container");let n=document.getElementsByClassName("active-list-item")[0];n.addEventListener("blur",(function(t){e.push(this.textContent)}));t.addEventListener("click",(function(){for(let e=0;e<s.getElementsByTagName("li").length;e++)s.getElementsByTagName("li")[e].contentEditable=!1,s.getElementsByTagName("li")[e].classList.remove("active-list-item"),s.getElementsByTagName("li")[e].previousElementSibling&&s.getElementsByTagName("li")[e].previousElementSibling.remove(),n=s.getElementsByTagName("li")[e];s.innerHTML+='\n        <ul>\n            <label for="">Add your list item</label>\n            <li contenteditable="true" class="active-list-item"></li>\n            <button class="delete-list-item">Delete</button>\n        </ul>\n        ';for(let t=0;t<deleteButtons.length;t++){document.getElementsByClassName("delete-list-item")[t].addEventListener("click",(function(t){const s=t.target.previousElementSibling.textContent;e=e.filter((e=>e!==s)),t.target.closest("ul").remove()}))}document.getElementsByClassName("active-list-item")[0].addEventListener("blur",(function(t){e.push(this.textContent)}))})),deleteButtons=document.getElementsByClassName("delete-list-item");for(let e=0;e<deleteButtons.length;e++){document.getElementsByClassName("delete-list-item")[e].addEventListener("click",(function(e){console.log("test"),e.target.closest("ul").remove();e.target.closest("li").textContent}))}document.getElementById("save-list").addEventListener("click",(function(t){t.preventDefault();const s={name:document.getElementById("list-name").value,userId:document.getElementById("session-user-id").value,listItems:e};fetch("/apps/lists/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{JSON.parse(e)&&(window.location.href="http://192.168.1.23/apps/lists")})).catch((e=>{console.error("Fetch error:",e)}))}))}));